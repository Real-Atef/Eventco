'use strict';function resetFields(idContainer){$(toJQueryId(idContainer)).find(":input").each(function(){switch(this.type){case "hidden":case "password":case "select-multiple":case "select-one":case "text":case "textarea":$(this).val("");break;case "checkbox":case "radio":this.checked=false}})}
function createForm(target,action,formParameter){let reportForm=document.createElement("form");reportForm.name="reportDispatcher.do";reportForm.action=action;reportForm.method="post";reportForm.target=target;$.each(formParameter,function(index,value){let reportInput=document.createElement("input");reportInput.type="text";reportInput.name=value[0];reportInput.value=value[1];reportForm.appendChild(reportInput)});document.body.appendChild(reportForm);reportForm.submit();document.body.removeChild(reportForm)}
function reportDispatcherJS(idReport,cdReport,reportParameter,viewAs){let detailSeatParameterTmp=new Array;$.each(reportParameter,function(index,value){detailSeatParameterTmp.push(new Array("RPTMANPAR."+value[0],value[1]))});if(cdReport!=null)detailSeatParameterTmp.push(new Array("cdReport",cdReport));else if(idReport!=null)detailSeatParameterTmp.push(new Array("idReport",idReport));detailSeatParameterTmp.push(new Array("viewAs",viewAs));createForm("_blank","/reportDispatcher.do",detailSeatParameterTmp)}
function checkIBAN(idIBAN,idSubmit){let isValid=true;let cdIBAN=$("#"+idIBAN).val();if(cdIBAN.length<5){alert("Errore formato IBAN: La lunghezza \u00e8 minore di 5 caratteri");isValid=false}if(isValid){let s=cdIBAN.substring(4)+cdIBAN.substring(0,4);let r=0;for(let i=0;i<s.length;i++){let c=s.charCodeAt(i);let k;if(48<=c&&c<=57){if(i==s.length-4||i==s.length-3){alert("Errore formato IBAN: Posizioni 1 e 2 non possono contenere cifre");isValid=false}k=c-48}else if(65<=c&&c<=90){if(i==s.length-2||i==
s.length-1){alert("Errore formato IBAN: Posizioni 3 e 4 non possono contenere lettere");isValid=false}k=c-55}else{alert("Errore formato IBAN:Sono ammesse solo cifre e lettere maiuscole");isValid=false}if(k>9)r=(100*r+k)%97;else r=(10*r+k)%97}if(isValid&&r!=1){alert("Errore formato IBAN: Il codice di controllo \u00e8 errato");isValid=false}}if($("#"+idSubmit).length)if(isValid)$("#"+idSubmit).removeAttr("disabled");else $("#"+idSubmit).attr("disabled","disabled");return isValid}
function checkCreditCard(input){let ccNumb=input.value;let valid="0123456789";let len=ccNumb.length;let iCCN=parseInt(ccNumb);let sCCN=ccNumb.toString();sCCN=sCCN.replace(/^\s+|\s+$/g,"");let iTotal=0;let bNum=true;let bResult=false;let temp;let calc;if(len==undefined||len==0){alert(labels.get("spInvalidCreditCard"));return false}for(let j=0;j<len;j++){temp=""+sCCN.substring(j,j+1);if(valid.indexOf(temp)=="-1")bNum=false}if(!bNum)bResult=false;if(len==0&&bResult)bResult=false;else if(len>=15){for(let i=
len;i>0;i--){calc=parseInt(iCCN)%10;calc=parseInt(calc);iTotal+=calc;i--;iCCN=iCCN/10;calc=parseInt(iCCN)%10;calc=calc*2;switch(calc){case 10:calc=1;break;case 12:calc=3;break;case 14:calc=5;break;case 16:calc=7;break;case 18:calc=9;break;default:calc=calc}iCCN=iCCN/10;iTotal+=calc}if(iTotal%10==0)bResult=true;else bResult=false}if(!bResult)alert(labels.get("spInvalidCreditCard"));return bResult}let wasOpen=false;
(function($){$.widget("custom.combobox",{_create:function(){this.wrapper=$("\x3cspan\x3e").addClass("custom-combobox").insertAfter(this.element);this.element.hide();this._createAutocomplete();this._createShowAllButton()},_createAutocomplete:function(){var selected=this.element.children(":selected"),value=selected.val()?selected.text():"";this.input=$("\x3cinput\x3e").appendTo(this.wrapper).val(value).autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).tooltip({tooltipClass:"ui-state-highlight"});
this._on(this.input,{autocompleteselect:function(event,ui){ui.item.option.selected=true;this._trigger("select",event,{item:ui.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){let input=this.input;wasOpen=false;$("\x3ca\x3e").attr("tabIndex",-1).attr("title","Show All Items").tooltip().appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").mousedown(function(){wasOpen=
input.autocomplete("widget").is(":visible")}).click(function(){input.focus();if(input.autocomplete("widget").is(":visible"))return;input.autocomplete("search","")})},_source:function(request,response){let matcher=new RegExp($.ui.autocomplete.escapeRegex(request.term),"i");response(this.element.children("option").map(function(){let text=$(this).text();if(this.value&&(!request.term||matcher.test(text)))return{label:text,value:text,option:this}}))},_removeIfInvalid:function(event,ui){if(ui.item)return;
let value=this.input.val(),valueLowerCase=value.toLowerCase(),valid=false;this.element.children("option").each(function(){if($(this).text().toLowerCase()===valueLowerCase){this.selected=valid=true;return false}});if(valid)return;this.input.val("").attr("title",value+" didn't match any item").tooltip("open");this.element.val("");this._delay(function(){this.input.tooltip("close").attr("title","")},2500);this.input.autocomplete("instance").term=""},_destroy:function(){this.wrapper.remove();this.element.show()}})})(jQuery);
function checkCdVenueSiae(inputID,formName){let input=getJQByID(inputID).val();if(input.length>0&&input.length!=13){alert("Attention, check the Siae code, is not 13 number");return false}if(formName!=null)return formName.validate()}function checkSumFiscalCode(idFiscalCode){let pattern=/^[a-zA-Z]{6}[0-9]{2}[a-zA-Z][0-9]{2}[a-zA-Z][0-9]{3}[a-zA-Z]$/;let CodiceFiscale=document.getElementById(idFiscalCode);if(CodiceFiscale.value.search(pattern)==-1)return false;else return true}
function deactivatekeyCode13(event){if(event.keyCode==13)event.preventDefault()}
function setFormLookupAutocomplete2(selectID,cdFormLookup,isReadonly){if(cdFormLookup==null||isReadonly)$(toJQueryId(selectID)).select2({readonly:isReadonly});else $(toJQueryId(selectID)).select2({ajax:{delay:250,url:"/formLookupHandler.json",data:function(params){let query={cdCommand:"SEARCH",cdFormLookup:cdFormLookup,nmKeyword:params.term};let data="formLookupRequestInfo\x3d"+JSON.stringify(query);return encodeURI(data)},processResults:function(data){data=$.map(data.formLookupValueList,function(obj){obj.id=
obj.id||obj.cdKey;obj.text=obj.text||obj.cdValue;return obj});return{results:data}}}})}
function setFormLookupAutocomplete(inputKeyID,inputDescID,cdFormLookup){$(toJQueryId(inputDescID)).keydown(function(event){if(event.keyCode==13){event.preventDefault();return false}});$(toJQueryId(inputDescID)).autocomplete({minLength:2,source:function(request,response){$(toJQueryId(inputKeyID)).val("");let nmKeyword=$(toJQueryId(inputDescID)).val();let sourceURL="/formLookupHandler.json";let dataOut="formLookupRequestInfo\x3d{cdCommand:'SEARCH',cdFormLookup:'"+cdFormLookup+"',nmKeyword:'"+nmKeyword+
"'}";console.log("Autocomplete search for \x3d '"+nmKeyword+"'");$.post(sourceURL,dataOut,function(data,textStatus){response($.map(data.formLookupValueList,function(value,key){return{key:value.cdKey,value:value.cdValue+" - "+value.cdKey}}))},"json")},select:function(event,ui){if(ui.item){$(toJQueryId(inputKeyID)).val(ui.item.key);$(toJQueryId(inputDescID)).val(ui.item.value+" - "+ui.item.key)}}});$(toJQueryId(inputDescID)).autocomplete("instance")._renderMenu=function(ul,items){var that=this;$.each(items,
function(index,item){that._renderItemData(ul,item)});$(ul).find("li:even").addClass("menuItem0");$(ul).find("li:odd").addClass("menuItem1")};$(toJQueryId(inputDescID)).blur(function(){if($(toJQueryId(inputKeyID)).val()==""||$(toJQueryId(inputKeyID)).val()==undefined)$(toJQueryId(inputDescID)).val("");else if($(toJQueryId(inputDescID)).val()==""||$(toJQueryId(inputDescID)).val()==undefined)$(toJQueryId(inputKeyID)).val("")});$(toJQueryId(inputKeyID+".btn")).mousedown(function(){wasOpen=$(toJQueryId(inputDescID)).autocomplete("widget").is(":visible")}).click(function(){$(toJQueryId(inputDescID)).focus();
if(wasOpen)return;$(toJQueryId(inputDescID)).val("");$(toJQueryId(inputDescID)).autocomplete("search","% %")})}function setFormLookupAutocomplete(inputKeyID,inputDescID,cdFormLookup,isPublic){setFormLookupAutocomplete(inputKeyID,inputDescID,cdFormLookup,isPublic,null)}
function setFormLookupAutocomplete(inputKeyID,inputDescID,cdFormLookup,isPublic,paramters){$(toJQueryId(inputDescID)).keydown(function(event){if(event.keyCode==13){event.preventDefault();return false}});$(toJQueryId(inputDescID)).autocomplete({minLength:2,source:function(request,response){$(toJQueryId(inputKeyID)).val("");let nmKeyword=$(toJQueryId(inputDescID)).val();let sourceURL="/formLookupHandler.json";let dataOut="formLookupRequestInfo\x3d{cdCommand:'SEARCH',cdFormLookup:'"+cdFormLookup+"',nmKeyword:'"+
nmKeyword+"',parameterTable:"+paramters+"}";console.log("Autocomplete search for \x3d '"+nmKeyword+"'");$.post(sourceURL,dataOut,function(data,textStatus){response($.map(data.formLookupValueList,function(value,key){if(isPublic)return{key:value.cdKey,value:value.cdValue};else return{key:value.cdKey,value:value.cdValue+" - "+value.cdKey}}))},"json")},select:function(event,ui){if(ui.item){$(toJQueryId(inputKeyID)).val(ui.item.key);$(toJQueryId(inputDescID)).val(ui.item.value+" - "+ui.item.key)}}});$(toJQueryId(inputDescID)).autocomplete("instance")._renderMenu=
function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)});$(ul).find("li:even").addClass("menuItem0");$(ul).find("li:odd").addClass("menuItem1")};$(toJQueryId(inputDescID)).blur(function(){if($(toJQueryId(inputKeyID)).val()==""||$(toJQueryId(inputKeyID)).val()==undefined)$(toJQueryId(inputDescID)).val("");else if($(toJQueryId(inputDescID)).val()==""||$(toJQueryId(inputDescID)).val()==undefined)$(toJQueryId(inputKeyID)).val("")});$(toJQueryId(inputKeyID+".btn")).mousedown(function(){wasOpen=
$(toJQueryId(inputDescID)).autocomplete("widget").is(":visible")}).click(function(){$(toJQueryId(inputDescID)).focus();if(wasOpen)return;$(toJQueryId(inputDescID)).val("");$(toJQueryId(inputDescID)).autocomplete("search","% %")})}
function countDown(id,qtTimeLeft,ulRedirect){if(qtTimeLeft>0){let day=Math.floor(qtTimeLeft/(60*60*24)%31);let hours=Math.floor(qtTimeLeft/(60*60)%24);let minutes=Math.floor(qtTimeLeft/60%60);let seconds=Math.floor(qtTimeLeft%60);if(hours<10)hours="0"+hours;if(minutes<10)minutes="0"+minutes;if(seconds<10)seconds="0"+seconds;let dhCount="";if(day>0)dhCount+=day+":";if(hours>0)dhCount+=hours+":";dhCount+=minutes+":"+seconds;document.getElementById(id).innerHTML=dhCount;setTimeout(function(){countDown(id,
qtTimeLeft-1,ulRedirect)},1E3)}else if(ulRedirect!=undefined){console.log("redi: "+ulRedirect);document.location=ulRedirect}}function validateHtml5Form(form){var isValid=true;$(form).find("input[required]").each(function(){if(this.value==""){$(this).addClass("fmMandatoryColor");isValid=false}});if(!isValid)alert(labels.get("checkRedFields"));return isValid};